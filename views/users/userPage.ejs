<%- layout("/layouts/boilerplate") -%>
  <style>
    h1 {
      width: auto;
    }
  </style>
  <header>

    <div class="userContainer">

      <div class="userProfile">

        <div class="userProfile-image">

          <img src="<%= user.profile_image.url %>" alt="" class="imgcover">


        </div>

        <div class="userProfile-user-settings">
          <div class="nameSetting">
            <h1 class="userProfile-user-name"><b><%= user.username %></b></h1>
            <% // if profile of current user only then edit button will be available %>
          <% if(String(currUser._id) == String(user._id)){ %>
            <button id="settingsBtn"aria-label="userProfile settings"><i
              class="fas fa-cog" ></i></button>
          <% } %>
          </div>



         
          <% // if profile of current user only then edit button will be available %>
          
          <% if(String(currUser._id) == String(user._id)){ %>
            <div id="otherButtonsContainer" class="userbutton">
              <ul>
                <li>
                  <a href="/users/edit"><button class="btn userProfile-edit-btn">Edit Profile</button></a>
                  <button class="btn userProfile-edit-btn">Update DP</button>
                </li>
              </ul>
            </div>
          
          <% } %>
          
          <div class="stats">
            <div class="info">
             
                <center><b>1M</b></center>
                <p>Followers</p>
              
            </div>
            <div class="info">
             
                <center><b>1M</b></center>
                <p>Followers</p>
              
            </div>
            <div class="info">
             
                <center><b>1M</b></center>
                <p>Followers</p>
              
            </div>
          </div>





         
            <div class="userProfile-bio">

              <p> <%= user.bio %></p>

            </div>
          
        </div>



      </div>
      <!-- End of userProfile section -->

    </div>
    <!-- End of userContainer -->

  </header>



  <div class="userContainer">

    <div class="gallery">
      
    <div class="album py-5 bg-light">
      <div class="container">

        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
            <% for(post of posts) { %>
            <div class="card">
              <img height="350px" src="<%= post.image.url %>" class="mt-2 card-img-top" alt="post-image">
              <div class="card-body">
                <p class="card-text"><%= post.content %></p>
              </div>
            </div>
          <% } %>

        </div>
      </div>
    </div>

  </main>
          
    </div>
    <!-- End of gallery -->

    <div class="loader"></div>

  </div>
  <!-- End of userContainer -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const settingsBtn = document.getElementById("settingsBtn");
      const otherButtonsContainer = document.getElementById("otherButtonsContainer");

      // Add click event listener to settings button
      settingsBtn.addEventListener("click", function () {
        // Toggle the visibility of the other buttons container
        otherButtonsContainer.classList.toggle("show");
      });
    });
    const sender_id = "<%= currUser._id %>";
    let socket = io("/user-namespace", {
      auth: {
        token: sender_id,
      },
    });
  </script>